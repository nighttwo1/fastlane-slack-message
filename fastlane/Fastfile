# This file contains the fastlane.tools configuration
# You can find the documentation at https://docs.fastlane.tools
#
# For a list of all available actions, check out
#
#     https://docs.fastlane.tools/actions
#
# For a list of all available plugins, check out
#
#     https://docs.fastlane.tools/plugins/available-plugins
#

# Uncomment the line if you want fastlane to automatically update itself
# update_fastlane

default_platform(:android)

platform :android do
  desc "Description of what the lane does"
  lane :custom_lane do
    # add actions here: https://docs.fastlane.tools/actions
  end

  lane :post_to_slack do |options|
    slack_message(
      title: "ìƒˆë¡œìš´ ì•ˆë“œë¡œì´ë“œ ì•±ì´ ë°°í¬ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸš€",
      sub_title: "Checkout for new version of android app!",
      webhook_url: options[:webhook_url],
      payload: {
        "ë²„ì „" => "0.1.10",
        "íŒ¨í‚¤ì§€ëª…" => "com.nighttwo1.slackmsg",
        "Release Date" => "2024-06-05"
      },
      footer: "í…ŒìŠ¤íŠ¸ í›„ í”¼ë“œë°±ì€ ì–¸ì œë“ ì§€ í™˜ì˜í•©ë‹ˆë‹¤. ì•± ì‚¬ìš© ì¤‘ ë¬¸ì œê°€ ë°œìƒí•˜ê±°ë‚˜ ê°œì„  ì‚¬í•­ì´ ìˆë‹¤ë©´ ë©”ì‹œì§€ë¥¼ ë‚¨ê²¨ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤.",
    )
  end

  lane :post_to_slack_with_custom_body do |options|
    slack_message(
      webhook_url: options[:webhook_url],
      custom_body: '{
        "blocks": [
            {
              "type": "header",
              "text": {
                "type": "plain_text",
                "text": "ìƒˆë¡œìš´ ì•ˆë“œë¡œì´ë“œ ì•±ì´ ë°°í¬ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸš€",
                "emoji": true
              }
            },
            {
              "type": "section",
              "text": {
                "type": "plain_text",
                "text": "Checkout for new version of android app!",
                "emoji": true
              }
            },
            {
              "type": "section",
              "fields": [
                {
                  "type": "mrkdwn",
                  "text": "*ë²„ì „:* `0.1.10`"
                },
                {
                  "type": "mrkdwn",
                  "text": "*íŒ¨í‚¤ì§€ëª…:* `com.nighttwo1.slackmsg`"
                },
                {
                  "type": "mrkdwn",
                  "text": "*Release Date:* `2024-06-05`"
                }
              ]
            },
            {
              "type": "divider"
            },
            {
              "type": "section",
              "text": {
                "type": "mrkdwn",
                "text": "í…ŒìŠ¤íŠ¸ í›„ í”¼ë“œë°±ì€ ì–¸ì œë“ ì§€ í™˜ì˜í•©ë‹ˆë‹¤. ì•± ì‚¬ìš© ì¤‘ ë¬¸ì œê°€ ë°œìƒí•˜ê±°ë‚˜ ê°œì„  ì‚¬í•­ì´ ìˆë‹¤ë©´ ë©”ì‹œì§€ë¥¼ ë‚¨ê²¨ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤."
              }
            }
          ]
        }'
    )
  end
end
